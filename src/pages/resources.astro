---
import Layout from '../layouts/Layout.astro'

// Modern Compass Resources page
// Streamlined architecture: Featured tools > Prompts/Bookshelf/Apps > Newsletters/TikTok > CTA

const tools = [
  {
    title: 'Creative Equity Review',
    href: 'https://newsletter.themoderncompass.io/p/creative-equity-and-the-compounding-effect-of-creating',
    description: 'Track compounding effort so motivation is not tied to daily performance.',
    label: 'Modern Compass tool',
  },
  {
    title: 'TimeOS Audit',
    href: '/tools/timeos-audit',
    description: 'Five page audit to reclaim time.',
    label: 'Free with newsletter',
  },
]

const prompts = [
  { title: 'Intention vs Action reflection', href: '/prompts/intention-action', description: 'Ten minute exercise to spot where you are stuck in intention without action.' },
  { title: 'Power of Two resonance scan', href: '/prompts/power-of-two', description: 'Identify two reliable points of resonance before you invest more in a relationship.' },
]

const bookshelf = [
  { title: 'Atomic Habits', author: 'James Clear', href: 'https://jamesclear.com/atomic-habits', note: 'Clear mechanisms for habit formation that pairs well with Creative Equity.' },
  { title: '7 Habits of Highly Effective People', author: 'Stephen Covey', href: 'https://www.franklincovey.com/courses/the-7-habits/', note: 'Timeless habits for aligning values with daily action. It reinforces Modern Compass by showing how character and principle-based living create a stable foundation for growth.' },
  { title: 'The Defining Decade', author: 'Meg Jay', href: 'https://www.megjay.com/the-defining-decade', note: 'Identity capital that complements Modern Compass frameworks and character chapters.' },
]

const apps = [
  {
    name: 'ChatGPT Plus',
    href: 'https://chat.openai.com/',
    note: 'My everyday copilot for brainstorming, research, formatting, and scaffolding code.',
  },
  {
    name: 'Atoms by James Clear',
    href: 'https://atoms.jamesclear.com',
    note: 'A habit tracker that builds on the Atomic Habits framework to make small actions stick.',
  },
  {
    name: 'Impulse Wallet (In Development)',
    href: '/tools/impulse-wallet',
    note: 'A Modern Compass web app to track your impulses and compare weekly scores with friends or family to fight negative habits and reinforce positive ones.',
  },
]

const newsletters = [
  { name: 'James Clear 3-2-1', href: 'https://jamesclear.com/3-2-1', note: 'Short weekly prompts that pair well with micro actions.' },
  { name: 'Deep Culture', href: 'https://deepculture.substack.com', note: 'Interesting finds across the internet, and some ways broaden our horizon.' },
]

const tiktok = { href: 'https://www.tiktok.com/@themoderncompass', blurb: 'Follow for videos on confidence, trust, practical relationship skills, and more that bring the book to life.' }

const newsletterCTA = {
  heading: 'Get the TimeOS Audit free',
  body: 'Join the newsletter for practical tools and one useful idea each month. You will also get the five page TimeOS Audit as a welcome bonus.',
  button: { label: 'Join the newsletter', href: '/newsletter' },
}
---

<Layout>
  <section class="resources">
    <!-- Intro -->
    <h1>Modern Compass resources</h1>
    <p class="intro">A curated set of tools and recommendations I use and trust. Simple and built to help you take action today.</p>

    <!-- Featured tools -->
    <div class="block">
      <h2>Featured tools</h2>
      <div class="cards">
        {tools.map((t) => (
          <a href={t.href} class="card" rel={t.href.startsWith('http') ? 'nofollow noopener' : undefined} target={t.href.startsWith('http') ? '_blank' : undefined}>
            <div class="eyebrow">{t.label}</div>
            <h3>{t.title}</h3>
            <p>{t.description}</p>
          </a>
        ))}
      </div>
    </div>

    <!-- Prompts -->
    <div class="block">
      <h2>Prompts</h2>
      <ul class="list">
        {prompts.map((p) => (
          <li class="list-item">
            <a href={p.href} class="link">{p.title}</a>
            <p class="note">{p.description}</p>
          </li>
        ))}
      </ul>
    </div>

    <!-- Bookshelf -->
    <div class="block">
      <h2>Book shelf</h2>
      <div class="shelf-wrap">
        <div class="bookshelf" role="list">
          {bookshelf.map((b, i) => (
            <a
              href={b.href}
              role="listitem"
              class={`book-spine color-${i % 6}`}
              target="_blank"
              rel="nofollow noopener"
              aria-label={`${b.title} by ${b.author}`}
              title={`${b.title} â€” ${b.author}`}
            >
              <span class="spine-title">{b.title}</span>
              <span class="spine-author">{b.author}</span>
            </a>
          ))}
          <div class="shelf"></div>
        </div>
      </div>
      <p class="shelf-note">Click a spine to learn more about the book.</p>
    </div>

    <!-- Apps -->
    <div class="block">
      <h2>Apps I use</h2>
      <div class="table">
        {apps.map((a) => (
          <div class="row">
            <div class="cell title">
              <a href={a.href} class="link" rel="nofollow noopener" target="_blank">{a.name}</a>
            </div>
            <div class="cell">{a.note}</div>
          </div>
        ))}
      </div>
    </div>

    <!-- Newsletters -->
    <div class="block">
      <h2>Newsletters worth reading</h2>
      <ul class="list">
        {newsletters.map((n) => (
          <li class="list-item">
            <a href={n.href} class="link" rel="nofollow noopener" target="_blank">{n.name}</a>
            <span class="note">{n.note}</span>
          </li>
        ))}
      </ul>
    </div>

    <!-- TikTok -->
    <div class="promo">
      <div class="promo-copy">
        <h3>TikTok</h3>
        <p>{tiktok.blurb}</p>
      </div>
      <a href={tiktok.href} class="button ghost" rel="nofollow noopener" target="_blank">Visit @themoderncompass</a>
    </div>

    <!-- CTA -->
    <div class="cta">
      <h2>{newsletterCTA.heading}</h2>
      <p>{newsletterCTA.body}</p>
      <a href={newsletterCTA.button.href} class="button">{newsletterCTA.button.label}</a>
    </div>
  </section>
</Layout>

<style>
  .resources { display: flex; flex-direction: column; gap: 2rem; }
  .intro { max-width: 720px; color: var(--text-muted, #4b5563); }

  .block { display: flex; flex-direction: column; gap: 1rem; }
  .block h2 { font-size: 1.5rem; color: var(--secondary-color); }

  .cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 1rem; }
  .card { background: #fff; border: 1px solid #eaeaea; border-radius: 12px; padding: 1.25rem; text-decoration: none; color: inherit; transition: box-shadow .2s ease; }
  .card:hover { box-shadow: 0 4px 18px rgba(0,0,0,.06); }
  .card h3 { font-size: 1.15rem; color: var(--primary-color); margin: .25rem 0; }
  .card p { font-size: .95rem; color: var(--text-muted, #4b5563); }
  .eyebrow { font-size: .72rem; color: #1d4ed8; font-weight: 600; letter-spacing: .02em; text-transform: uppercase; }
  .by { color: #111827; font-weight: 600; }

  .list { list-style: none; padding: 0; margin: 0; display: grid; gap: .75rem; }
  .list-item { background: #fff; border: 1px solid #eaeaea; border-radius: 12px; padding: 1rem; }
  .link { color: var(--link-color, #1d4ed8); text-decoration: none; font-weight: 600; }
  .note { display: block; color: var(--text-muted, #4b5563); margin-top: .25rem; }

  .table { display: grid; grid-template-columns: 1fr; border: 1px solid #eaeaea; border-radius: 12px; overflow: hidden; }
  .row { display: grid; grid-template-columns: 240px 1fr; gap: 1rem; padding: .9rem 1rem; border-top: 1px solid #eaeaea; }
  .row:first-child { border-top: none; }
  .cell.title { font-weight: 600; }

  .promo { display: flex; flex-direction: column; gap: .75rem; border: 1px solid #eaeaea; border-radius: 12px; padding: 1rem; align-items: flex-start; }
  .promo-copy h3 { margin: 0; font-size: 1.15rem; color: var(--primary-color); }

  .cta { text-align: center; background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 16px; padding: 2rem; }
  .cta h2 { font-size: 1.75rem; margin: 0 0 .5rem; }
  .button { display: inline-flex; align-items: center; justify-content: center; padding: .75rem 1rem; border-radius: 12px; background: #1d4ed8; color: #fff; text-decoration: none; font-weight: 600; }
  .button.ghost { background: transparent; color: #1d4ed8; border: 1px solid #1d4ed8; }

  @media (min-width: 768px) {
    .list { grid-template-columns: 1fr 1fr; }
  }

  /* Bookshelf wrapper constrains width */
 .shelf-wrap {
  max-width: 500px;
  margin-left: 0;    /* instead of auto */
  margin-right: auto;
}

  /* Bookshelf uses content width, not full container */
  .bookshelf {
    position: relative;
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: 56px;
    gap: .75rem;
    align-items: end;
    justify-content: center;
    min-height: 220px;
    padding-bottom: 18px;
    width: fit-content;
  }

  .bookshelf .shelf {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    height: 10px;
    background: linear-gradient(#c9a97e, #b58f66);
    border-radius: 6px;
    box-shadow: 0 2px 6px rgba(0,0,0,.15) inset, 0 6px 16px rgba(0,0,0,.08);
  }

  .book-spine {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    width: 56px;
    height: var(--h, 200px);
    padding: 8px 6px;
    border-radius: 6px;
    color: #111;
    text-decoration: none;
    box-shadow: 0 2px 6px rgba(0,0,0,.08), inset 0 0 0 1px rgba(0,0,0,.06);
    transition: transform .15s ease, box-shadow .15s ease;
    writing-mode: vertical-rl;
    text-orientation: mixed;
    transform: rotate(180deg);
  }
  .book-spine:hover {
    transform: translateY(-4px) rotate(180deg);
    box-shadow: 0 6px 18px rgba(0,0,0,.12), inset 0 0 0 1px rgba(0,0,0,.08);
  }
  .spine-title { font-weight: 700; font-size: .9rem; line-height: 1; letter-spacing: .01em; text-align: center; }
  .spine-author { font-size: .75rem; opacity: .85; text-align: center; }

  .shelf-note { margin-top: .5rem; color: var(--text-muted, #4b5563); font-size: .9rem; }

  @media (max-width: 640px) {
    .shelf-wrap { max-width: 100%; }
  }

  /* Optional colorways for spines */
  .color-0 { background: linear-gradient(180deg, #f3d9a7, #eac27b); }
  .color-1 { background: linear-gradient(180deg, #c6e2ff, #9ec5ff); }
  .color-2 { background: linear-gradient(180deg, #ffd5d5, #ffb4b4); }
  .color-3 { background: linear-gradient(180deg, #d8ffc8, #b7f3a3); }
  .color-4 { background: linear-gradient(180deg, #e3d7ff, #c8b5ff); }
  .color-5 { background: linear-gradient(180deg, #ffe6c7, #ffd19a); }
</style>
