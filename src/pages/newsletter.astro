---
import Layout from '../layouts/Layout.astro';
---

<Layout>

  <section class="newsletter-hero">
    <!-- Beta Access Badge -->
    <div class="beta-badge">
      üî• <span class="pulse">EXCLUSIVE BETA ACCESS</span>
    </div>

    <!-- Main Hero Content -->
    <div class="hero-content">
      <div class="hero-text">
        <h1 class="hero-title">Get Impulse Wallet Beta + Monthly Tools</h1>
        <p class="hero-subtitle">Join 100+ subscribers for exclusive app access before public launch</p>

        <!-- Quick Value Props -->
        <div class="value-props">
          <div class="prop">üì± Beta app access</div>
          <div class="prop">üß† Monthly frameworks</div>
          <div class="prop">üéØ TimeOS system</div>
        </div>
      </div>

      <div class="hero-visual">
        <div class="mockup-container">
          <img
            src="/src/assets/main-wallet-interface.png"
            alt="Impulse Wallet Beta Interface"
            class="wallet-mockup"
          />
          <div class="social-proof-overlay">
            <div class="proof-item">‚úÖ 100+ subscribers</div>
            <div class="proof-item">üöÄ Beta launching</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Subscribe Form - Compressed for Mobile -->
    <div class="newsletter-embed-hero">
      <script async src="https://subscribe-forms.beehiiv.com/embed.js"></script>
      <iframe
        src="https://subscribe-forms.beehiiv.com/261a3276-40ab-431a-8523-c85bec095b96"
        class="beehiiv-embed-mobile"
        frameborder="0"
        scrolling="no"
        title="Subscribe to Modern Compass on Beehiiv"
      ></iframe>
    </div>
  </section>

  <!-- Secondary Content (Below fold) -->
  <section class="newsletter-details">

    <!-- Social Proof Testimonials -->
    <div class="testimonials">
      <h3>What Subscribers Are Saying</h3>
      <div class="testimonial-grid">
        <blockquote>"TimeOS gave me clarity in minutes‚Äîlove it!"</blockquote>
        <blockquote>"Monthly tools that actually work in real life."</blockquote>
      </div>
    </div>

    <!-- Secondary CTA -->
    <div class="secondary-cta">
      <p>Ready to join 100+ others building better habits?</p>
      <script async src="https://subscribe-forms.beehiiv.com/embed.js"></script>
      <iframe
        src="https://subscribe-forms.beehiiv.com/261a3276-40ab-431a-8523-c85bec095b96"
        class="beehiiv-embed-secondary"
        frameborder="0"
        scrolling="no"
        title="Subscribe to Modern Compass on Beehiiv"
      ></iframe>
    </div>

    <!-- Top Issues -->
    <section class="top-issues">
      <h2>Recent Issues</h2>
      <div class="card-grid">
        <!-- Card 1: Resonance & Power of Two -->
        <article class="flip-card">
          <button class="flip-inner">
            <div class="flip-face flip-front">
              <h3>Resonance &amp; The Power of Two</h3>
              <p class="kicker">Why and how we click with some people</p>
            </div>
            <div class="flip-face flip-back">
              <p>Resonance forms when two signals align. The Power of Two
                focuses attention on two meaningful components that create momentum in a relationship.</p>
              <a
                href="https://newsletter.themoderncompass.io/p/the-power-of-two-the-simple-way-to-think-about-why-we-click"
                target="_blank"
                rel="noopener noreferrer"
                class="cta"
              >Read the full issue ‚Üí</a>
            </div>
          </button>
        </article>

        <!-- Card 2: Creative Equity Review -->
        <article class="flip-card">
          <button class="flip-inner">
            <div class="flip-face flip-front">
              <h3>Creative Equity Review</h3>
              <p class="kicker">Track effort, compound wins, give yourself some credit</p>
            </div>
            <div class="flip-face flip-back">
              <p> A weekly audit to measure inputs, compounding signals,
                and directional gains so progress stays visible even when performance metrics like views, subscribers and follower counts lag.</p>
              <a
                href="https://newsletter.themoderncompass.io/p/creative-equity-and-the-compounding-effect-of-creating"
                target="_blank"
                rel="noopener noreferrer"
                class="cta"
              >Read the full issue ‚Üí</a>
            </div>
          </button>
        </article>
      </div>
    </section>
  </section>

    <!-- Why Subscribe (kept at bottom) -->
    <section aria-labelledby="why-subscribe" class="why">
      <h3 id="why-subscribe">Why Subscribe to <em>Modern Compass</em>?</h3>

      <p>Most personal growth content is noise. <em>Modern Compass</em> is different.</p>

      <div class="why-grid">
        <div class="why-item">
          <strong>üí° Clarity without fluff</strong>
          <p>Big ideas distilled into practical takeaways</p>
        </div>
        <div class="why-item">
          <strong>üõ†Ô∏è Proven frameworks</strong>
          <p>Tools like TimeOS to guide real decisions</p>
        </div>
        <div class="why-item">
          <strong>‚ö° Action over theory</strong>
          <p>Exercises you can apply immediately</p>
        </div>
        <div class="why-item">
          <strong>üì± Exclusive app access</strong>
          <p>Beta testing privileges for Impulse Wallet</p>
        </div>
      </div>
    </section>
</Layout>

<style>
  .newsletter {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    max-width: 900px;
    padding: 1rem;
  }

.promo-img {
  max-width: 450px;   /* shrink to whatever max size you like */
  width: 100%;        /* stays responsive down to mobile */
  height: auto;
  display: block;
  margin: 0 auto;     /* centers the image */
}

  .page-title {
    font-size: 2rem;
    color: #111827;
  }

  .intro {
    font-size: 1.1rem;
    color: #374151;
  }

  .promo img {
    display: block;
    width: 100%;
    border-radius: 12px;
  }

  .newsletter-embed {
    display: flex;
    justify-content: center;
  }

  .beehiiv-embed {
    width: 100%;
    max-width: 640px;
    height: 460px;
    border: 0;
    background: transparent;
  }

  .top-issues h2 {
    font-size: 1.5rem;
    color: #111827;
  }

  .card-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  @media (min-width: 720px) {
    .card-grid { grid-template-columns: repeat(2, 1fr); }
  }

/* Flip Cards */
.flip-card {
  perspective: 1000px;
}

.flip-inner {
  width: 100%;
  height: 240px; /* slightly taller to fit content */
  background: transparent;
  border: none;
  padding: 0;
  cursor: pointer;
  position: relative;
}

.flip-face {
  position: absolute;
  inset: 0;
  border-radius: 12px;
  background: #fff;
  backface-visibility: hidden;
  padding: 1rem;
  display: grid;
  align-content: center;
  gap: 0.4rem;
  transition: transform 0.6s ease, box-shadow 0.3s ease;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1); /* subtle default shadow */
  border: 1px solid #e5e7eb; /* keeps the border you had */
}

.flip-inner:hover .flip-face,
.flip-inner:focus-visible .flip-face {
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2); /* deeper shadow on hover/focus */
  transform: scale(1.02); /* slight pop-out effect */
}

.flip-front h3 {
  margin: 0;
  font-size: 1.1rem;
}

.flip-front .kicker {
  color: #6b7280;
}

.flip-back {
  transform: rotateY(180deg);
  text-align: left;
}

.flip-inner:hover .flip-front,
.flip-inner:focus-visible .flip-front {
  transform: rotateY(180deg);
}
.flip-inner:hover .flip-back,
.flip-inner:focus-visible .flip-back {
  transform: rotateY(360deg);
}

.flip-back .cta {
  color: var(--primary-color, #0ea5e9);
  font-weight: 600;
  text-decoration: none;
  margin-top: 0.5rem;
  display: inline-block;
}
.flip-back .cta:hover {
  text-decoration: underline;
}

.flip-back {
  transform: rotateY(180deg);
  text-align: left;
}

/* Keep front + back font consistent */
.flip-front,
.flip-back {
  font-size: 1.2rem;   /* same size on both faces */
  line-height: 1.6;
}

.flip-front h3,
.flip-back h3,
.flip-front h4,
.flip-back h4 {
  font-size: 1.4rem;
  margin-bottom: 0.5rem;
}

</style>

<script is:inline>
  // Add class to body for custom styling
  document.body.classList.add('newsletter-page');

  // Meta Pixel tracking for newsletter signups
  if (typeof fbq !== 'undefined') {
    // Track newsletter page view
    fbq('track', 'ViewContent', {
      content_name: 'Newsletter Landing Page',
      content_category: 'Newsletter'
    });

    // Listen for form submissions (you can enhance this based on Beehiiv events)
    document.addEventListener('DOMContentLoaded', function() {
      // This will track when users interact with the iframe
      const iframes = document.querySelectorAll('.beehiiv-embed-mobile, .beehiiv-embed-secondary');
      iframes.forEach(iframe => {
        iframe.addEventListener('load', function() {
          fbq('track', 'InitiateCheckout', {
            content_name: 'Newsletter Signup Form',
            value: 5.00,
            currency: 'USD'
          });
        });
      });
    });
  }
</script>
